<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Frisna & Nita Wedding Invitation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Leckerli+One&display=swap" rel="stylesheet">

    <!-- SimplyCountdown -->
    <link rel="stylesheet" href="countdown/simplyCountdown.theme.default.css"/>
    <script src="countdown/simplyCountdown.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section id="hero" 
    class="hero w-100 h-100 p-3 mx-auto text-center d-flex justify-content-center
    align-items-center text-white">
        <main>
            <h3>The Wedding of :</h3>
            <h1>Frisna & Nita</h1>
            <p>Akan dilangsungkan dalam:</p>
            <div class="simply-countdown">
            </div>
            <h4>Mohon Kehadirannya kepada Bapak/Ibu/Saudara/i,</h4>
            <pre class="form-control" id="source" rows="3"></pre>
            <a href="#Home" class="btn btn-lg" id="btn">Lihat Undangan</a>
            <!-- <audio hidden loop>
                <source src="AKAD - PAYUNG TEDUH ( Saxophone & Flugelhorn Cover by Garry Lesmana & Rigen EriHandoyo_xQ27cY5jNYU.mp3"
                type="" media=""/>
            </audio> -->
            
            <script>
            // Ambil elemen-elemen yang diperlukan
            const hero = document.getElementById('hero');
            const openButton = document.getElementById('btn');
            const homeSection = document.getElementById('Home');
        
            // Tambahkan event listener pada tombol "Buka Undangan"
            openButton.addEventListener('click', function() {
                // Sembunyikan hero dengan animasi
                hero.classList.add('lifted');

                // Gulirkan halaman ke bagian atas section Home
                homeSection.scrollIntoView({ behavior: 'smooth' });

                // Atur overflow-y pada body menjadi hidden
                document.body.style.overflowY = 'hidden';
            });

            </script>
        </main>
    </section>

    <section id="Home" class="Home mx-auto text-center justify-content-center text-white">
        <div class="slideshow">
            <img src="img/slideshow.gif" alt="">
            <div class="judul">
                <h4>The Wedding of :</h4>
                <h1>Frisna & Nita</h1>
            </div>
        </div>
            <div class="ayat">
            <div class="row justify-content-center text-center">
                <div class="col-md-8 col-10 text-center">
                    <div class="icon">
                        <i class="bi bi-envelope-paper-heart-fill"></i>
                    </div>
                        <h3>QS Ar-rum 21</h3>
                        <p>"Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari 
                     jenismu sendiri, agar kamu cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu 
                     rasa kasih dan sayang.":</p>  
                </div>
                </div>

            </div>
        </div>
    </section>

    <section id="couple" class="couple">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 col-10 text-center">
                <img class="bismillah" src="img/bismillah-hijau.png" alt="">
                <h2>Assalamuâ€™alaikum Wr. Wb.</h2>
                <p>Tanpa mengurangi rasa hormat, perkenankan kami mengundang Bapak/Ibu/Saudara/i, serta kerabat sekalian, untuk menghadiri acara pernikahan kami:</p>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row text-center">
            <div class="nita">
                <div class="nita1">
                    <img src="img/nita1.JPG" alt="">
                </div>
                <h2>The bride</h2>
                <h3>NITA</h3>
                <h4>Putri dari Bapak   & Ibu  </h4>
            </div>
            <div class="frisna">
                <div class="frisna1">
                    <img src="img/frisna1.JPG" alt="">
                </div>
                <h2>The groom</h2>
                <h3>FRISNA</h3>
                <h4>Putra dari Bapak   & Ibu  </h4>
            </div>
        </div>
    </div>
</section>


    <section id="info" class="info">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8 col-10 text-center">
                    <h2>Informasi Acara</h2>
                </div>
            </div>
                <div class="row justify-content-center mt-4">
                    <div class="col-md-5 col-10">
                        <div class="card text-center text-bg-light">
                            <div class="card-header">Akad Nikah</div>
                            <div class="card-body">
                                <div class="row justify-content-center">
                                    <div class="col-md-6">
                                        <i class="bi bi-clock d-block"></i>
                                        <span>15.00 WIB s/d Selesai</span>
                                    </div>
                                    <div class="col-md-6">
                                        <i class="bi bi-calendar-event d-block"></i>
                                        <span>Rabu, 24 April 2024</span>
                                    </div>
                                </div>    
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5 col-10">
                        <div class="card text-center text-bg-light">
                            <div class="card-header">Resepsi</div>
                            <div class="card-body">
                                <div class="row justify-content-center">
                                    <div class="col-md-6">
                                        <i class="bi bi-clock d-block"></i>
                                        <span>08.00 WIB s/d Selesai</span>
                                    </div>
                                    <div class="col-md-6">
                                        <i class="bi bi-calendar-event d-block"></i>
                                        <span>Kamis, 25 April 2024</span>
                                    </div>
                                </div>    
                            </div>
                        </div>
                    </div>
                </div>
            <div class="row justify-content-center">
                <div class="col-md-5 col-10 text-center">    
                    <div class="maps">
                        <h4>Lokasi Acara</h4>
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3982.6688218430463!2d102.17808207386157!3d-3.4305498417271996!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e315bee0e22da71%3A0xc7e53a4d028ba295!2sJl.%20Dr.%20Ak.%20Gani%2C%20Kec.%20Arga%20Makmur%2C%20Kabupaten%20Bengkulu%20Utara%2C%20Bengkulu!5e0!3m2!1sid!2sid!4v1701067721706!5m2!1sid!2sid" width="80%" height="200" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center">
                <p class="col-md-5 col-10 text-center">"Diharapkan untuk tidak salah tanggal dan lokasi. Apabila tiba di lokasi namun tidak
                    ada tanda-tanda sedang dilangsungkan acara pernikahan, boleh jadi Anda salah tanggal
                    atau salah alamat. Mohon periksa kembali detail acara dengan cermat, terima kasih."
                </p>
            </div>
        </div>
        </section>
    <section id="story" class="story">
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-10 text-center justify-content-center">

                </div>
            </div>
        </div>
    </section>
    <section id="comment" class="comment">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8 col-10">
                    <div class="comment-card">
                        <h2 class="text-center">Form Ucapan Tamu Undangan</h2>
                        <!-- Tampilkan jumlah komentar di sini -->
                        <div class="text-center" id="commentCount"></div>
                        <form id="commentForm" class="comment-form">
                            <div class="form-group">
                                <label for="name">Nama:</label>
                                <input type="text" id="name" name="name" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="message">Ucapan:</label>
                                <textarea id="message" name="message" rows="3" class="form-control" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="attendance">Konfirmasi Kehadiran:</label>
                                <select id="attendance" name="attendance" class="form-control">
                                    <option value="Hadir">Hadir</option>
                                    <option value="Tidak Hadir">Tidak Hadir</option>
                                </select>
                            </div>
                            <button id="kirim" type="submit" class="btn btn-primary">Kirim</button>
                            <!-- Tombol untuk menampilkan/sembunyikan komentar -->
                            <button id="toggleComments" class="btn btn-secondary">Tampilkan Komentar</button>
                        </form>
                    </div>
    
                    <!-- Tempat menampilkan komentar -->
                    <div id="comments" class="comment-list" style="display: none;">
                        <!-- Komentar akan ditambahkan di sini -->
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-firestore.js";
    
    const firebaseConfig = {
    apiKey: "AIzaSyBhFQgSYFS_CVC7rYuPS104UoDOpeuz-jU",
    authDomain: "diginvite-d7398.firebaseapp.com",
    projectId: "diginvite-d7398",
    storageBucket: "diginvite-d7398.appspot.com",
    messagingSenderId: "107107137467",
    appId: "1:107107137467:web:2fc4f99aaa7c30fd6f369e",
    measurementId: "G-FV5YG0WMJE"
  };
    // Inisialisasi Firebase
    const app = initializeApp(firebaseConfig);
    const dbFirestore = getFirestore(app);
    //   const dbRealtime = getDatabase(app);

  // Menyimpan komentar ke Firestore saat formulir dikirim
    const form = document.getElementById('commentForm');
    form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const name = document.getElementById('name').value;
    const message = document.getElementById('message').value;
    const attendance = document.getElementById('attendance').value;

    try {
      await addDoc(collection(dbFirestore, 'comments'), {
        name: name,
        message: message,
        attendance: attendance,
        timestamp: new Date().toISOString()
      });
      console.log("Komentar berhasil disimpan di Firestore");
      form.reset();
    } catch (error) {
      console.error("Error adding document: ", error);
    }
  });

    // Mendengarkan perubahan pada Firestore dan menampilkan komentar serta menghitung commentCount
    const commentsContainerFirestore = document.getElementById('comments');
    let commentCount = 0; // Inisialisasi commentCount

    onSnapshot(collection(dbFirestore, 'comments'), (snapshot) => {
    commentsContainerFirestore.innerHTML = '';
    commentCount = 0; // Reset commentCount saat mendapatkan snapshot baru
    snapshot.forEach((doc) => {
        const commentData = doc.data();
        const commentItem = document.createElement('div');
        commentItem.classList.add('comment-item'); // Menambahkan class comment-item
        // Mendapatkan timestamp dan mengonversinya ke dalam format yang diinginkan
        const timestamp = new Date(commentData.timestamp);
        const formattedTimestamp = `${timestamp.getDate()}/${timestamp.getMonth() + 1}/${timestamp.getFullYear()}`;

        commentItem.innerHTML = `<strong>${commentData.name}</strong>: ${commentData.message} - ${formattedTimestamp}`;
        commentsContainerFirestore.appendChild(commentItem);
        commentCount++; // Menghitung jumlah komentar
    });

    // Menampilkan jumlah komentar di dalam HTML
    const commentCountContainer = document.getElementById('commentCount');
    commentCountContainer.textContent = `Jumlah Komentar: ${commentCount}`;
    });
    // Menampilkan atau menyembunyikan daftar komentar saat tombol ditekan
    const toggleCommentsButton = document.getElementById('toggleComments');
    toggleCommentsButton.addEventListener('click', function() {
        const commentsContainer = document.getElementById('comments');
        if (commentsContainer.style.display === 'none' || commentsContainer.style.display === '') {
            commentsContainer.style.display = 'block';
            toggleCommentsButton.textContent = 'Sembunyikan Komentar';
        } else {
            commentsContainer.style.display = 'none';
            toggleCommentsButton.textContent = 'Tampilkan Komentar';
        }
    });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>    
    <script>
        simplyCountdown('.simply-countdown', {
            year: 2024, // required
            month: 2, // required
            day: 10, // required
            hours: 8
            , // Default is 0 [0-23] integer
            minutes: 0, // Default is 0 [0-59] integer
            seconds: 0, // Default is 0 [0-59] integer
            words: { //words displayed into the countdown
                days: { singular: 'hari', plural: 'hari' },
                hours: { singular: 'jam', plural: 'jam' },
                minutes: { singular: 'menit', plural: 'menit' },
                seconds: { singular: 'detik', plural: 'detik' }
            },
        })
    </script>
    <script>
        // Function to update the source code
        function updateSource(newSource) {
          // Replace %20 with space
          newSource = decodeURIComponent(newSource.replace(/\+/g, " "));
          
          // Get the DOM elements
          const sourceContainer = document.getElementById("source-container");
          const sourceElement = document.getElementById("source");
          
          // Set the source code and split it into lines
          sourceElement.textContent = newSource;
          const sourceLines = newSource.split("\n");
          
          // Calculate source width and height
          const sourceWidth = sourceLines.reduce((acc, line) => Math.max(acc, line.length), 0);
          const sourceHeight = sourceLines.length;
          
          // Define container width limits
          const containerWidth = window.innerWidth;
          const maxWidth = 1000;
          
          // Set container width based on source width and limits
          if (sourceWidth > containerWidth) {
            sourceContainer.style.width = sourceWidth + "px";
          } else if (sourceWidth > maxWidth) {
            sourceContainer.style.width = maxWidth + "px";
          } else {
            sourceContainer.style.width = sourceWidth + "px";
          }
        }
      
        // Get the new source code from the URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const newSource = urlParams.get("tamu");
      
        // Update the source code
        if (newSource !== null) {
          updateSource(newSource);
        }
      </script>
</body>
</html>